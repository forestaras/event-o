<?php

namespace App\Http\Controllers;

use App\Models\Telegram;
use App\Models\Telegram_log;
use Illuminate\Http\Request;

class New_Telegramt_messageController extends Controller
{
    static function messge_to_telegram($data)
    {
        if (!empty($data['message']['text'])) {
            $chat_id = $data['message']['from']['id'];
            $user_name = $data['message']['from']['username'];
            $first_name = $data['message']['from']['first_name'];
            $last_name = $data['message']['from']['last_name'];
            $text = trim($data['message']['text']);
            $text_array = explode(" ", $text);
            $bot_state = self::get_bot_state($chat_id);
        }
        if ($bot_state) {
            if ($bot_state === '/name') {
                if (strpos($text, '/') !== true) {
                    $people=Telegram::where('user_id', $chat_id)->where('name', $text)->first();
                    if(!$people){
                        $name = new Telegram();
                        $name->name = $text;
                        $name->username = $user_name;
                        $name->user_id = $chat_id;
                        $name->save();
                        $text_return = $text . " Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğ¹ Ğ´Ğ¾ ÑĞ¿Ğ¸ÑĞºÑƒ Ğ²Ñ–Ğ´ÑÑ‚ĞµĞ¶ĞµĞ½Ğ½Ñ. Ğ¯ĞºÑ‰Ğ¾ Ğ²Ğ¸ Ñ…Ğ¾Ñ‡ĞµÑ‚Ğµ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚Ğ¸ Ñ‰Ğµ ĞºĞ¾Ğ³Ğ¾ÑÑŒ, Ğ¿ĞµÑ€ĞµĞ¹Ğ´Ñ–Ñ‚ÑŒ /name. ğŸ“
                        ĞŸĞµÑ€ĞµĞ³Ğ»ÑĞ½ÑƒÑ‚Ğ¸ Ğ²ĞµÑÑŒ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ²Ñ–Ğ´ÑÑ‚ĞµĞ¶ĞµĞ½Ğ½Ñ Ğ¼Ğ¾Ğ¶Ğ½Ğ° Ñ‚ÑƒÑ‚ /list_name. ğŸ‘€";
                    }
                    else{
                        $text_return = $text . " Ğ²Ğ¶Ğµ Ñ” Ñƒ ÑĞ¿Ğ¸ÑĞºÑƒ Ğ´Ğ»Ñ Ğ²Ñ–Ğ´ÑÑ‚ĞµĞ¶ĞµĞ½Ğ½Ñ. Ğ¯ĞºÑ‰Ğ¾ Ğ²Ğ¸ Ñ…Ğ¾Ñ‡ĞµÑ‚Ğµ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚Ğ¸ Ñ‰Ğµ ĞºĞ¾Ğ³Ğ¾ÑÑŒ, Ğ¿ĞµÑ€ĞµĞ¹Ğ´Ñ–Ñ‚ÑŒ /name. ğŸ“
                        ĞŸĞµÑ€ĞµĞ³Ğ»ÑĞ½ÑƒÑ‚Ğ¸ Ğ²ĞµÑÑŒ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ²Ñ–Ğ´ÑÑ‚ĞµĞ¶ĞµĞ½Ğ½Ñ Ğ¼Ğ¾Ğ¶Ğ½Ğ° Ñ‚ÑƒÑ‚ /list_name. ğŸ‘€";
                    }
                }
            }
            if ($bot_state == '/delet') {
                if (strpos($text, '/') !== true) {
                    $rezult = Telegram::where('user_id', $chat_id)->where('name', $text)->delete();
                    if ($rezult) {
                        $text_return = "âœ… Ğ’Ğ¸ ÑƒÑĞ¿Ñ–ÑˆĞ½Ğ¾ Ğ²Ğ¸Ğ´Ğ°Ğ»Ğ¸Ğ»Ğ¸ $text Ğ·Ñ– ÑĞ²Ğ¾Ğ³Ğ¾ ÑĞ¿Ğ¸ÑĞºÑƒ Ğ²Ñ–Ğ´ÑÑ‚ĞµĞ¶ĞµĞ½Ğ½Ñ.
                        Ğ¯ĞºÑ‰Ğ¾ Ğ²Ğ¸ Ğ±Ğ°Ğ¶Ğ°Ñ”Ñ‚Ğµ Ğ²Ğ¸Ğ´Ğ°Ğ»Ğ¸Ñ‚Ğ¸ Ñ‰Ğµ ĞºĞ¾Ğ³Ğ¾ÑÑŒ Ğ·Ñ– ÑĞ¿Ğ¸ÑĞºÑƒ, ÑĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ°Ğ¹Ñ‚ĞµÑÑ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ¾Ñ /delet.

                        ğŸ“‹ Ğ”Ğ»Ñ Ğ¿ĞµÑ€ĞµĞ³Ğ»ÑĞ´Ñƒ Ğ¿Ğ¾Ğ²Ğ½Ğ¾Ğ³Ğ¾ ÑĞ¿Ğ¸ÑĞºÑƒ Ğ²Ñ–Ğ´ÑÑ‚ĞµĞ¶ĞµĞ½Ğ½Ñ Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ¾Ğ²ÑƒĞ¹Ñ‚Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñƒ /list_name.";
                    } else {
                        $text_return = "Ğ£ Ğ²Ğ°Ñ Ğ½Ğµ Ğ±ÑƒĞ»Ğ¾ Ñ‚Ğ°ĞºĞ¾Ğ³Ğ¾ Ñ–Ğ¼ĞµĞ½Ñ– Ñƒ ÑĞ¿Ğ¸ÑĞºÑƒ";
                    }
                }
            }
            // $text_return = "Ğ’ĞºĞ°Ğ¶Ñ–Ñ‚ÑŒ Ñ–Ğ¼Ñ ÑĞºĞµ Ğ²Ğ¸ Ñ…Ğ¾Ñ‡ĞµÑ‚Ğµ Ğ²Ğ¸Ğ´Ğ°Ğ»Ğ¸Ñ‚Ğ¸ Ğ·Ñ– ÑĞ¿Ğ¸ÑĞºÑƒ";

            file_put_contents('telegram_bot/users/' . $chat_id . '.txt', "2222");
        }
        switch ($text) {
            case '/start':
                $text_return = "ĞŸÑ€Ğ¸Ğ²Ñ–Ñ‚, $first_name $last_name! Ğ›Ğ°ÑĞºĞ°Ğ²Ğ¾ Ğ¿Ñ€Ğ¾ÑĞ¸Ğ¼Ğ¾ Ğ´Ğ¾ Ğ±Ğ¾Ñ‚Ğ° Event_O! ğŸ¤–âœ¨
                Ğ¦Ñ– ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ¸ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ– Ğ´Ğ»Ñ Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ°Ğ½Ğ½Ñ:                                  
                /name - Ğ´Ğ¾Ğ´Ğ°Ñ‚Ğ¸ Ğ½Ğ¾Ğ²Ğµ Ñ–Ğ¼'Ñ Ğ´Ğ¾ ÑĞ¿Ğ¸ÑĞºÑƒ Ğ²Ñ–Ğ´ÑÑ‚ĞµĞ¶ĞµĞ½Ğ½Ñ â•ğŸ‘¤
                /list_name - Ğ¿ĞµÑ€ĞµĞ³Ğ»ÑĞ½ÑƒÑ‚Ğ¸ Ğ²ĞµÑÑŒ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ²Ñ–Ğ´ÑÑ‚ĞµĞ¶ĞµĞ½Ğ½Ñ ğŸ‘¥ğŸ“‹   
                /help - Ğ¾Ñ‚Ñ€Ğ¸Ğ¼Ğ°Ñ‚Ğ¸ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¸Ñ… ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´ ğŸ“šâ“
                /delet - Ğ²Ğ¸Ğ´Ğ°Ğ»Ğ¸Ñ‚Ğ¸ Ñ–Ğ¼'Ñ Ğ·Ñ– ÑĞ¿Ğ¸ÑĞºÑƒ Ğ²Ñ–Ğ´ÑÑ‚ĞµĞ¶ĞµĞ½Ğ½ÑğŸ—‘ï¸ğŸ‘¤

                ğŸ“š ĞĞ¿Ğ¸Ñ: Event_O - Ñ†Ğµ Ñ‚ĞµĞ»ĞµĞ³Ñ€Ğ°Ğ¼-Ğ±Ğ¾Ñ‚, ÑÑ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ¸Ğ¹ Ğ´Ğ»Ñ Ğ²Ñ–Ğ´ÑÑ‚ĞµĞ¶ĞµĞ½Ğ½Ñ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ–Ğ² Ğ¿Ğ¾Ğ´Ñ–Ğ¹ Ñ– Ğ·Ğ¼Ğ°Ğ³Ğ°Ğ½ÑŒ. Ğ’Ñ–Ğ½ Ğ´Ğ¾Ğ¿Ğ¾Ğ¼Ğ°Ğ³Ğ°Ñ” ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ğ°Ğ¼ Ğ±ÑƒÑ‚Ğ¸ Ğ² ĞºÑƒÑ€ÑÑ– Ğ¾Ğ½Ğ¾Ğ²Ğ»ĞµĞ½ÑŒ Ñ‚Ğ° Ğ¾Ñ‚Ñ€Ğ¸Ğ¼ÑƒĞ²Ğ°Ñ‚Ğ¸ Ğ°ĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ñƒ Ñ–Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ñ–Ñ Ğ¿Ñ€Ğ¾ ÑƒÑ‡Ğ°ÑĞ½Ğ¸ĞºÑ–Ğ² Ñ‚Ğ° Ñ—Ñ… Ğ´Ğ¾ÑÑĞ³Ğ½ĞµĞ½Ğ½Ñ.
                ğŸ’¡ Ğ¤ÑƒĞ½ĞºÑ†Ñ–Ğ¾Ğ½Ğ°Ğ»: Ğ‘Ğ¾Ñ‚ Ğ´Ğ¾Ğ·Ğ²Ğ¾Ğ»ÑÑ” Ğ´Ğ¾Ğ´Ğ°Ğ²Ğ°Ñ‚Ğ¸ Ñ–Ğ¼ĞµĞ½Ğ° ÑƒÑ‡Ğ°ÑĞ½Ğ¸ĞºÑ–Ğ² Ğ´Ğ¾ ÑĞ¿Ğ¸ÑĞºÑƒ Ğ²Ñ–Ğ´ÑÑ‚ĞµĞ¶ÑƒĞ²Ğ°Ğ½Ğ½Ñ, Ğ¾Ñ‚Ñ€Ğ¸Ğ¼ÑƒĞ²Ğ°Ñ‚Ğ¸ Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ½Ñ Ğ¿Ñ€Ğ¾ Ñ—Ñ… Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¸ Ñ‚Ğ° Ğ¼Ñ–ÑÑ†Ğµ Ğ² Ğ·Ğ¼Ğ°Ğ³Ğ°Ğ½Ğ½ÑÑ…. ĞšÑ€Ñ–Ğ¼ Ñ‚Ğ¾Ğ³Ğ¾, Ğ²Ğ¸ Ğ¼Ğ¾Ğ¶ĞµÑ‚Ğµ Ğ¿ĞµÑ€ĞµĞ³Ğ»ÑĞ½ÑƒÑ‚Ğ¸ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ²ÑÑ–Ñ… Ğ²Ñ–Ğ´ÑÑ‚ĞµĞ¶ÑƒĞ²Ğ°Ğ½Ğ¸Ñ… Ñ–Ğ¼ĞµĞ½ Ñ– Ğ·Ñ€ÑƒÑ‡Ğ½Ğ¾ ĞºĞµÑ€ÑƒĞ²Ğ°Ñ‚Ğ¸ ÑĞ¿Ğ¸ÑĞºĞ¾Ğ¼ Ğ²Ñ–Ğ´ÑÑ‚ĞµĞ¶ÑƒĞ²Ğ°Ğ½Ğ½Ñ.                             
                Ğ‘Ğ°Ğ¶Ğ°Ñ”Ğ¼Ğ¾ Ğ²Ğ°Ğ¼ Ğ¿Ñ€Ğ¸Ñ”Ğ¼Ğ½Ğ¾Ğ³Ğ¾ ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ±Ğ¾Ñ‚Ğ¾Ğ¼ Event_O Ñ‚Ğ° ÑƒÑĞ¿Ñ–Ñ…Ñ–Ğ² Ñƒ Ğ²ÑÑ–Ñ… Ğ²Ğ°ÑˆÑ–Ñ… Ğ¿Ğ¾Ğ´Ñ–ÑÑ…! ğŸ‰ğŸŒŸ";
                break;
            case '/help':
                $text_return = "ĞŸÑ€Ğ¸Ğ²Ñ–Ñ‚, $first_name $last_name! Ğ¯ - Ğ±Ğ¾Ñ‚ Event_O, ÑĞºĞ¸Ğ¹ ÑÑ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ¸Ğ¹ Ğ´Ğ»Ñ Ğ²Ñ–Ğ´ÑÑ‚ĞµĞ¶ĞµĞ½Ğ½Ñ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ–Ğ² Ğ¿Ğ¾Ğ´Ñ–Ğ¹ Ñ– Ğ·Ğ¼Ğ°Ğ³Ğ°Ğ½ÑŒ. Ğ”Ğ¾Ğ·Ğ²Ğ¾Ğ»ÑŒÑ‚Ğµ Ğ¼ĞµĞ½Ñ– Ñ€Ğ¾Ğ·Ğ¿Ğ¾Ğ²Ñ–ÑÑ‚Ğ¸ Ğ²Ğ°Ğ¼ Ğ¿Ñ€Ğ¾ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ– ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ¸:
                
                /name - Ñ†Ñ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° Ğ´Ğ¾Ğ·Ğ²Ğ¾Ğ»ÑÑ” Ğ²Ğ°Ğ¼ Ğ´Ğ¾Ğ´Ğ°Ñ‚Ğ¸ Ğ½Ğ¾Ğ²Ğµ Ñ–Ğ¼'Ñ Ğ´Ğ¾ ÑĞ¿Ğ¸ÑĞºÑƒ Ğ²Ñ–Ğ´ÑÑ‚ĞµĞ¶ÑƒĞ²Ğ°Ğ½Ğ½Ñ. Ğ¯ Ğ±ÑƒĞ´Ñƒ Ğ²Ñ–Ğ´ÑĞ»Ñ–Ğ´ĞºĞ¾Ğ²ÑƒĞ²Ğ°Ñ‚Ğ¸ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¸ Ğ´Ğ»Ñ Ğ²ĞºĞ°Ğ·Ğ°Ğ½Ğ¾Ñ— Ğ¾ÑĞ¾Ğ±Ğ¸ Ñ– Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ¾Ğ¼Ğ»ÑÑ‚Ğ¸ Ğ²Ğ°Ñ Ğ¿Ñ€Ğ¾ Ñ—Ñ… Ğ¾Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ. ğŸ“âœ…
                
                /list_name - Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ¾Ğ²ÑƒĞ¹Ñ‚Ğµ Ñ†Ñ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñƒ, Ñ‰Ğ¾Ğ± Ğ¿ĞµÑ€ĞµĞ³Ğ»ÑĞ½ÑƒÑ‚Ğ¸ Ğ¿Ğ¾Ğ²Ğ½Ğ¸Ğ¹ ÑĞ¿Ğ¸ÑĞ¾Ğº Ñ–Ğ¼ĞµĞ½, ÑĞºÑ– Ñ Ğ²Ñ–Ğ´ÑÑ‚ĞµĞ¶ÑƒÑ. Ğ’Ğ¸ Ğ·Ğ¼Ğ¾Ğ¶ĞµÑ‚Ğµ Ğ¿Ğ¾Ğ±Ğ°Ñ‡Ğ¸Ñ‚Ğ¸ Ğ²ÑÑ– Ğ´Ğ¾Ğ´Ğ°Ğ½Ñ– Ñ–Ğ¼ĞµĞ½Ğ° Ñ– Ğ±ÑƒÑ‚Ğ¸ Ğ² ĞºÑƒÑ€ÑÑ– Ñ—Ñ… Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ–Ğ². ğŸ“‹ğŸ‘€

                /delet - Ğ²Ğ¸Ğ´Ğ°Ğ»Ñ ÑƒÑ‡Ğ°ÑĞ½Ğ¸Ğº Ğ·Ñ– ÑĞ¿Ğ¸ÑĞºÑƒ Ğ²Ñ–Ğ´ÑÑ‚ĞµĞ¶ĞµĞ½Ğ½Ñ Ñ– Ğ±Ñ–Ğ»ÑŒÑˆĞµ Ğ½Ğµ Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ¾Ğ¼Ğ»ÑÑ‚Ğ¸Ğ¼Ñƒ Ğ²Ğ°Ñ Ğ¿Ñ€Ğ¾ Ğ¹Ğ¾Ğ³Ğ¾ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¸. ğŸ—‘ï¸ğŸ˜Š
       
                /help - Ñ†Ñ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° Ğ½Ğ°Ğ´Ğ°ÑÑ‚ÑŒ Ğ²Ğ°Ğ¼ Ğ¿Ğ¾Ğ²Ğ½Ğ¸Ğ¹ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¸Ñ… ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´ Ñ– ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¸Ğ¹ Ğ¾Ğ¿Ğ¸Ñ Ñ—Ñ… Ñ„ÑƒĞ½ĞºÑ†Ñ–Ğ¾Ğ½Ğ°Ğ»Ñƒ. Ğ’Ğ¸ Ğ·Ğ¼Ğ¾Ğ¶ĞµÑ‚Ğµ Ğ»ĞµĞ³ĞºĞ¾ Ğ¾Ğ·Ğ½Ğ°Ğ¹Ğ¾Ğ¼Ğ¸Ñ‚Ğ¸ÑÑ Ğ· Ğ¼Ğ¾Ğ¶Ğ»Ğ¸Ğ²Ğ¾ÑÑ‚ÑĞ¼Ğ¸ Ğ±Ğ¾Ñ‚Ğ°. ğŸ˜ŠğŸ“š
                                    
                ĞĞµ ÑĞ¾Ñ€Ğ¾Ğ¼Ñ‚ĞµÑÑ Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ¾Ğ²ÑƒĞ²Ğ°Ñ‚Ğ¸ Ñ†Ñ– ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ¸ Ğ´Ğ»Ñ Ğ¾Ñ‚Ñ€Ğ¸Ğ¼Ğ°Ğ½Ğ½Ñ Ğ½ĞµĞ¾Ğ±Ñ…Ñ–Ğ´Ğ½Ğ¾Ñ— Ñ–Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ñ–Ñ— Ñ‚Ğ° ĞºĞµÑ€ÑƒĞ²Ğ°Ğ½Ğ½Ñ ÑĞ¿Ğ¸ÑĞºĞ¾Ğ¼ Ğ²Ñ–Ğ´ÑÑ‚ĞµĞ¶ÑƒĞ²Ğ°Ğ½Ğ½Ñ.
                                    
                Ğ¯ Ğ·Ğ°Ğ²Ğ¶Ğ´Ğ¸ Ñ‚ÑƒÑ‚, Ñ‰Ğ¾Ğ± Ğ´Ğ¾Ğ¿Ğ¾Ğ¼Ğ¾Ğ³Ñ‚Ğ¸ Ğ²Ğ°Ğ¼ Ğ· Ğ±ÑƒĞ´ÑŒ-ÑĞºĞ¸Ğ¼Ğ¸ Ğ·Ğ°Ğ¿Ğ¸Ñ‚Ğ°Ğ½Ğ½ÑĞ¼Ğ¸ Ğ°Ğ±Ğ¾ Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ¾Ñ Ğ² Ğ´Ğ¾Ğ´Ğ°Ñ‚ĞºĞ¾Ğ²Ñ–Ğ¹ Ğ¿Ñ–Ğ´Ñ‚Ñ€Ğ¸Ğ¼Ñ†Ñ–. Ğ—Ğ²ĞµÑ€Ñ‚Ğ°Ğ¹Ñ‚ĞµÑÑŒ Ğ´Ğ¾ Ğ±Ğ¾Ñ‚Ğ° Event_O Ñ– Ğ¾Ñ‚Ñ€Ğ¸Ğ¼ÑƒĞ¹Ñ‚Ğµ Ğ·Ñ€ÑƒÑ‡Ğ½Ñƒ Ñ–Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ñ–Ñ Ğ¿Ñ€Ğ¾ Ğ²Ğ°ÑˆÑ– ÑƒĞ»ÑĞ±Ğ»ĞµĞ½Ñ– Ğ¿Ğ¾Ğ´Ñ–Ñ—! ğŸ˜ŠğŸ¤–";
                break;
            case '/name':

                $text_return = " ğŸ§‘â€ğŸ’»Ğ”Ğ»Ñ Ñ‚Ğ¾Ğ³Ğ¾ Ñ‰Ğ¾Ğ± Ğ´Ğ¾Ğ´Ğ°Ñ‚Ğ¸ ÑĞ¿Ğ¾Ñ€Ñ‚ÑĞ¼ĞµĞ½Ğ°, Ğ·Ğ° ÑĞºĞ¸Ğ¼ Ğ²Ğ¸ Ñ…Ğ¾Ñ‡ĞµÑ‚Ğµ ÑĞ»Ñ–Ğ´ĞºÑƒĞ²Ğ°Ñ‚Ğ¸, Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ğ½Ğ°Ğ¿Ğ¸ÑˆÑ–Ñ‚ÑŒ Ğ¹Ğ¾Ğ³Ğ¾ Ğ¿Ñ€Ñ–Ğ·Ğ²Ğ¸Ñ‰Ğµ Ñ‚Ğ° Ñ–Ğ¼'Ñ, Ğ½Ğ°Ğ¿Ñ€Ğ¸ĞºĞ»Ğ°Ğ´: Ğ¨ĞµĞ²Ñ‡ĞµĞ½ĞºĞ¾ Ğ¢Ğ°Ñ€Ğ°Ñ.";

                break;

            case '/delet':
                $text_return = "  ğŸ—‘ï¸ Ğ¯ĞºÑ‰Ğ¾ Ğ²Ğ¸ Ğ±Ğ°Ğ¶Ğ°Ñ”Ñ‚Ğµ Ğ²Ğ¸Ğ´Ğ°Ğ»Ğ¸Ñ‚Ğ¸ ÑƒÑ‡Ğ°ÑĞ½Ğ¸ĞºĞ° Ğ·Ñ– ÑĞ¿Ğ¸ÑĞºÑƒ, Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ğ²ĞºĞ°Ğ¶Ñ–Ñ‚ÑŒ Ğ¹Ğ¾Ğ³Ğ¾ Ğ¿Ñ€Ñ–Ğ·Ğ²Ğ¸Ñ‰Ğµ Ñ–Ğ¼'Ñ, Ğ½Ğ°Ğ¿Ñ€Ğ¸ĞºĞ»Ğ°Ğ´: Ğ¨ĞµĞ²Ñ‡ĞµĞ½ĞºĞ¾ Ğ¢Ğ°Ñ€Ğ°Ñ.";
                break;
            case '/all_delet':

                $text_return = "Ğ’Ğ¸ Ğ²Ğ¿ĞµĞ²Ğ½ĞµĞ½Ñ–, Ñ‰Ğ¾ Ñ…Ğ¾Ñ‡ĞµÑ‚Ğµ Ğ²Ğ¸Ğ´Ğ°Ğ»Ğ¸Ñ‚Ğ¸ ÑƒÑÑ–Ñ… ÑĞ¿Ğ¾Ñ€Ñ‚ÑĞ¼ĞµĞ½Ñ–Ğ² Ğ·Ñ– ÑĞ²Ğ¾Ğ³Ğ¾ ÑĞ¿Ğ¸ÑĞºÑƒ?

                ğŸ—‘ï¸ Ğ¦Ñ Ğ´Ñ–Ñ Ğ¿Ñ€Ğ¸Ğ·Ğ²ĞµĞ´Ğµ Ğ´Ğ¾ Ğ¿Ğ¾Ğ²Ğ½Ğ¾Ğ³Ğ¾ Ğ²Ğ¸Ğ´Ğ°Ğ»ĞµĞ½Ğ½Ñ Ğ²ÑÑ–Ñ… ÑĞ¿Ğ¾Ñ€Ñ‚ÑĞ¼ĞµĞ½Ñ–Ğ², ÑĞºÑ– Ğ²Ğ¸ Ğ´Ğ¾Ğ´Ğ°Ğ»Ğ¸ Ğ´Ğ¾ ÑĞ¿Ğ¸ÑĞºÑƒ Ğ²Ñ–Ğ´ÑÑ‚ĞµĞ¶ĞµĞ½Ğ½Ñ. Ğ£ÑÑ– Ñ—Ñ…Ğ½Ñ– Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¸ Ñ‚Ğ° Ñ–Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ñ–Ñ Ğ±ÑƒĞ´ÑƒÑ‚ÑŒ Ğ²Ñ‚Ñ€Ğ°Ñ‡ĞµĞ½Ñ–.
                
                Ğ¯ĞºÑ‰Ğ¾ Ğ²Ğ¸ Ğ¿ĞµĞ²Ğ½Ñ– Ñƒ ÑĞ²Ğ¾Ñ”Ğ¼Ñƒ Ñ€Ñ–ÑˆĞµĞ½Ğ½Ñ–, Ğ²Ğ¸Ğ±ĞµÑ€Ñ–Ñ‚ÑŒ Ğ¾Ğ´Ğ½Ñƒ Ğ· Ğ½Ğ°ÑÑ‚ÑƒĞ¿Ğ½Ğ¸Ñ… Ğ¾Ğ¿Ñ†Ñ–Ğ¹:
                
                /yes_delet_all - Ğ¿Ñ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚Ğ¸ Ğ²Ğ¸Ğ´Ğ°Ğ»ĞµĞ½Ğ½Ñ ÑƒÑÑ–Ñ… ÑĞ¿Ğ¾Ñ€Ñ‚ÑĞ¼ĞµĞ½Ñ–Ğ².
                /no_delet_all - Ğ²Ñ–Ğ´Ğ¼Ñ–Ğ½Ğ¸Ñ‚Ğ¸ Ğ²Ğ¸Ğ´Ğ°Ğ»ĞµĞ½Ğ½Ñ Ñ‚Ğ° Ğ·Ğ°Ğ»Ğ¸ÑˆĞ¸Ñ‚Ğ¸ ÑĞ¿Ğ¸ÑĞºĞ¾Ğº Ğ±ĞµĞ· Ğ·Ğ¼Ñ–Ğ½.
                â—ï¸ Ğ—Ğ²ĞµÑ€Ğ½Ñ–Ñ‚ÑŒ ÑƒĞ²Ğ°Ğ³Ñƒ, Ñ‰Ğ¾ Ñ†Ñ Ğ´Ñ–Ñ Ğ½ĞµĞ¾Ğ±Ğ¾Ñ€Ğ¾Ñ‚Ğ½Ğ° Ñ– Ğ½Ğµ Ğ¼Ğ¾Ğ¶Ğµ Ğ±ÑƒÑ‚Ğ¸ ÑĞºĞ°ÑĞ¾Ğ²Ğ°Ğ½Ğ°. ĞŸĞµÑ€ĞµĞºĞ¾Ğ½Ğ°Ğ¹Ñ‚ĞµÑÑ, Ñ‰Ğ¾ Ğ²Ğ¸ Ğ´Ñ–Ğ¹ÑĞ½Ğ¾ Ğ±Ğ°Ğ¶Ğ°Ñ”Ñ‚Ğµ Ğ²Ğ¸Ğ´Ğ°Ğ»Ğ¸Ñ‚Ğ¸ Ğ²ÑÑ–Ñ… ÑĞ¿Ğ¾Ñ€Ñ‚ÑĞ¼ĞµĞ½Ñ–Ğ² Ğ·Ñ– ÑĞ²Ğ¾Ğ³Ğ¾ ÑĞ¿Ğ¸ÑĞºÑƒ.
                
                Ğ¯ĞºÑ‰Ğ¾ Ñƒ Ğ²Ğ°Ñ Ğ²Ğ¸Ğ½Ğ¸ĞºĞ»Ğ¸ Ğ¿Ğ¸Ñ‚Ğ°Ğ½Ğ½Ñ Ğ°Ğ±Ğ¾ Ğ¿Ğ¾Ñ‚Ñ€Ñ–Ğ±Ğ½Ğ° Ğ´Ğ¾Ğ´Ğ°Ñ‚ĞºĞ¾Ğ²Ğ° Ğ´Ğ¾Ğ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°, Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ¾Ğ²ÑƒĞ¹Ñ‚Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñƒ /help. ğŸ¤”ğŸ’¡";
                break;
            case '/list_name':
                $peoples=Telegram::where('user_id', $chat_id)->get();
                $list_name=self::list_name($peoples);
                $text_return = " ğŸ§‘â€ğŸ’»Ğ’Ğ¸ ÑĞ»Ñ–Ğ´ĞºÑƒÑ”Ñ‚Ğµ Ğ·Ğ°:$list_name";
                break;
        }


        file_put_contents('telegram_bot/users/' . $chat_id . '.txt', $text);
        return $text_return;
    }


    static function get_bot_state($chat_id)
    {
        if (file_exists('telegram_bot/users/' . $chat_id . '.txt')) {
            $data = file_get_contents('telegram_bot/users/' . $chat_id . '.txt');
            // $data = substr($data, 0, 6);
            return $data;
        } else {
            return '';
        }
    }
    static function list_name($peoples){
        $list_name=" ";
        foreach ($peoples as $people) {
            $list_name="$list_name 
            ($people->name)";
        }
        return $list_name;

    }


    static function create_log($name, $id, $event_id, $rt, $st, $stat)
    {
        $telegram = new Telegram_log();
        $telegram->name = $name;
        $telegram->rt = $rt;
        $telegram->st = $st;
        $telegram->user_id = $id;
        $telegram->event_id = $event_id;
        $telegram->stat = $stat;
        $telegram->save();
    }

    static function edit_log($id, $name , $rt, $st, $stat){
        $telegram = Telegram_log::find($id);
        $telegram->name = $name;
        $telegram->rt = $rt;
        $telegram->st = $st;
        // $telegram->user_id = $user_id;
        // $telegram->event_id = $event_id;
        $telegram->stat = $stat;
        $telegram->save();
    }
}
